<div class="modal-header">
  <button type="button" class="close" ng-click="jas.cancel()">
    <span class="pficon pficon-close"></span>
  </button>
  <h4 class="modal-title">Alert Settings</h4>
</div>
<div class="modal-body alert-settings">
  <p>Configure conditions settings for Heap usage alerts and notifications.</p>
  <form class="form-horizontal">
    <fieldset>
      <legend>Threshold Conditions</legend>
      <div class="form-group">
        <label class="col-sm-3 control-label">Maximum usage</label>
        <div class="col-sm-6">
          <span class="hk-input-text">{{jas.maxUsage / 1024 / 1024 | number : 2}} MB</span>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label" for="usage-greater">Usage greater than</label>
        <div class="col-sm-5">
          <div class="input-group hk-input-small">
            <input type="number" min="0" max="100" ng-model="jas.conditionGtPercent" class="form-control" id="usage-greater" ng-disabled="!jas.conditionGtEnabled">
            <div class="input-group-addon">%</div>
          </div>
          <span class="input-detail">({{jas.conditionGtEnabled && jas.conditionGtPercent ? (jas.maxUsage * jas.conditionGtPercent / 100/1024/1024 | number:2) : '-'}} MB)</span>
        </div>
        <div class="col-sm-4">
          <div class="onoffswitch pull-right">
            <input type="checkbox" id="usage-greater-switch" class="onoffswitch-checkbox" ng-model="jas.conditionGtEnabled" ng-click="jas.enableGt()">
            <label class="onoffswitch-label" for="usage-greater-switch">
                          <span class="onoffswitch-inner">
                            <span class="onoffswitch-active ng-binding">ON</span>
                            <span class="onoffswitch-inactive ng-binding">OFF</span>
                          </span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-3 control-label" for="usage-less">Usage less than</label>
        <div class="col-sm-5">
          <div class="input-group hk-input-small">
            <input type="number" min="0" max="100" ng-model="jas.conditionLtPercent" class="form-control" id="usage-less" ng-disabled="!jas.conditionLtEnabled">
            <div class="input-group-addon">%</div>
          </div>
          <span class="input-detail">({{jas.conditionLtEnabled && jas.conditionLtPercent ? (jas.maxUsage * jas.conditionLtPercent / 100/1024/1024 | number:2) : '-'}} MB)</span>
        </div>
        <div class="col-sm-4">
          <div class="onoffswitch pull-right">
            <input type="checkbox" id="usage-less-switch" class="onoffswitch-checkbox"  ng-model="jas.conditionLtEnabled"  ng-click="jas.enableLt()">
            <label class="onoffswitch-label" for="usage-less-switch">
                          <span class="onoffswitch-inner">
                            <span class="onoffswitch-active ng-binding">ON</span>
                            <span class="onoffswitch-inactive ng-binding">OFF</span>
                          </span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>
      </div>
    </fieldset>
    <fieldset>
      <legend>Alert</legend>
      <div class="form-group">
        <label class="col-sm-3 control-label">Create Alert</label>
        <div class="col-sm-9">
          <div class="radio">
            <label for="every-time-heap">
              <input type="radio" name="alert-heap" id="every-time-heap" ng-value="false" ng-model="jas.durationEnabled" checked="">
              Every time conditions are met.
            </label>eq
          </div>
          <div class="radio">
            <label for="greater-time-heap">
              <input type="radio" name="alert-heap" id="greater-time-heap" ng-value="true" ng-model="jas.durationEnabled">
              Only when conditions are met for greater than:
            </label>
          </div>
          <div class="input-group input-select indented">
            <input type="number" class="form-control" placeholder="Duration" ng-model="jas.responseDuration"
                   ng-disabled="!jas.durationEnabled" ng-change="jas.alertSettingTouch()">
            <select pf-select ng-model="jas.responseUnit" id="responseUnit"
                    ng-disabled="!jas.durationEnabled"
                    ng-options="item.value as item.label for item in jas.timeUnits"
                    ng-change="jas.changeTimeUnits()"></select>
          </div>
        </div>
      </div>
    </fieldset>
    <fieldset>
      <legend>Notification</legend>
      <p>Receive an email notification every time the conditions are met.</p>
      <div class="form-group">
        <label class="col-sm-3 control-label" for="email-heap">Email</label>
        <div class="col-sm-6">
          <input type="text" id="email-heap" class="form-control" ng-model="jas.trigger.actions.email[0]">
        </div>
      </div>
    </fieldset>
  </form>
</div>
<div class="modal-footer alert-settings">
  <button type="button" class="btn btn-primary" ng-click="jas.save()">
    <div ng-show="jas.saveProgress" class="spinner spinner-xs hk-modal-spinner"></div>Save</button>
  <button type="button" class="btn btn-default" ng-click="jas.cancel()">Cancel</button>
</div>
